<html>
<head>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.no-deps.min.js"></script> -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js'></script>
</head>

<body>
  <div id="logo"></div>
  <canvas id='canvas' width="400" height=400/>

  <script>

    var size = 400;
    var frames = 3;
    var xScale = 5;

// define the path to plot
var points = [];
points.push({
  x: size / 2,
  y: size / 8,
});

points.push({
  x: size / xScale,
  y: size / 2
});

points.push({
  x: points[0].x,
  y: size - points[0].y
});

points.push({
  x: size - points[1].x,
  y: points[1].y
});

points.push({
  x: points[0].x,
  y: points[0].y
});

// points.push({
//   x: size / 2,
//   y: size - size / 8,
// });
// points.push({
//   x: size - size / xScale,
//   y: size / 2,
// });
// points.push({
//   x: size / 2,
//   y: size / 8
// });

for (let lines = 1; lines < 15; lines++){
  for(let i=0; i<4;i++){
    let point = points[i];
    let x = point.x;
    let y = point.y;
    let step = 1 * lines;
    if (i === 1){
      x += step;
    } else if (i === 3){
      x -= step;
    }

    if (i === 0){
      y += step;
    } else if ( i === 2){
      y -= step;
    }

    points.push({
      x: x,
      y: y,
    });
  }
}


var c = Raphael("logo", size, size);
var pathes = [];
console.log(points);
let duration = 200;

for(let i=0; i<points.length - 1; i++){
  let steps = '';
  let point = points[i];
  let next = points[i + 1];
  console.log(point, next);
  steps += 'M' + point.x + ' ' + point.y;
  steps += ' L' + next.x + ' ' + next.y;
  pathes.push(steps);
}

setTimeout(animate, duration);

var cursor = 0;

function animate(){
  if (cursor < points.length / 2 - 1){
    setTimeout(animate, duration);
  }

  let reverseCursor = points.length - cursor - 1;
  drawLine(points[cursor], points[cursor + 1], duration);
  drawLine(points[reverseCursor], points[reverseCursor - 1], duration);
  cursor ++;
}

function drawLine(start, to, duration){
  let startStr = 'M' + start.x + ' ' + start.y;
  let move = c.path(startStr);
  move.animate({path: startStr + ' L' + to.x + ' ' + to.y}, duration);
}
</script>
</body>
</html>
